# CFA数据集关系与差异说明

## 一、数据集分类体系

### 1. 评估数据集 (Evaluation Datasets)

用于测试模型性能的数据集：

| 数据集 | 样本数 | 特点 |
|--------|--------|------|
| **FinEval/CFA-Challenge** | 90 | Salesforce官方，挑战级难度 |
| **FinEval/CFA-Easy** | 1,032 | Salesforce官方，简单级难度 |
| **FinEval/CRA-Bigdata** | 1,472 | Salesforce官方，大数据分析任务 |
| **flare-cfa** | 1,032 | 第三方评估数据集 |

**关系**: 
- FinEval系列是Salesforce官方评估套件，包含不同难度和任务类型
- flare-cfa是独立的评估数据集，可用于交叉验证

### 2. 训练数据集 (Training Datasets)

#### 2.1 Salesforce官方训练数据 (FinTrain系列)

| 数据集 | 样本数 | 类型 | 用途 |
|--------|--------|------|------|
| **apex_instruct** | 1,472,062 | 有监督 | 指令微调，最大数据集 |
| **book_fineweb** | 4,500 | 无监督 | 书籍和网页文本，预训练 |
| **cfa_exercise** | 2,946 | 有监督 | CFA练习题目，领域特定 |

**关系**: 
- apex_instruct是最大的训练集，用于指令跟随能力
- book_fineweb提供基础知识
- cfa_exercise专门针对CFA领域

#### 2.2 提取的QA数据集 (CFA_Extracted系列)

| 数据集 | 样本数 | 类型 | 特点 |
|--------|--------|------|------|
| **chunk_0** | 1,124 | 有监督 | 从材料提取，GPT-4验证 |
| **sft** | 2,946 | 有监督 | SFT格式，无材料上下文 |

**关系**: 
- 都来自CFA材料提取
- chunk_0包含材料上下文
- sft是纯问答对，用于指令微调

#### 2.3 其他训练数据

| 数据集 | 样本数 | 类型 | 特点 |
|--------|--------|------|------|
| **CFA_Judgement** | 11,099 | 训练数据 | 1997-2022年判断题库，双语 |
| **CFA_Level_III** | 90 | 训练数据 | 三级考试题目 |
| **CFA_Rule** | 1,125 | 无监督 | 规则文本，预训练用 |
| **CFA_Knowledgeable** | 564 | 无监督 | 知识问答文本 |

## 二、数据集用途差异

### 评估 vs 训练

- **评估数据集**: 仅用于测试，不参与训练
- **训练数据集**: 用于模型训练和微调

### 有监督 vs 无监督

- **有监督 (sup)**: 包含问题和答案对，用于微调
- **无监督 (unsup)**: 仅文本，用于预训练或知识注入

### 数据规模

- **大型**: apex_instruct (147万样本) - 通用指令数据
- **中型**: CFA_Judgement (1.1万), CFA_Extracted系列 (1-3千)
- **小型**: CFA_Level_III (90), CFA_Knowledgeable (564)

## 三、数据集关系图

```
评估数据集
├── FinEval系列 (官方)
│   ├── CFA-Challenge (挑战)
│   ├── CFA-Easy (简单)
│   └── CRA-Bigdata (大数据)
└── flare-cfa (第三方)

训练数据集
├── FinTrain系列 (官方)
│   ├── apex_instruct (指令微调，147万)
│   ├── book_fineweb (无监督，4.5千)
│   └── cfa_exercise (CFA练习，3千)
├── CFA_Extracted系列
│   ├── chunk_0 (带上下文，1.1千)
│   └── sft (纯QA，3千)
└── 其他
    ├── CFA_Judgement (判断题，1.1万)
    ├── CFA_Level_III (三级，90)
    ├── CFA_Rule (规则，1.1千)
    └── CFA_Knowledgeable (知识，564)
```

## 四、使用建议

### 训练流程建议

1. **预训练阶段**: 
   - book_fineweb (无监督)
   - CFA_Rule, CFA_Knowledgeable (无监督)

2. **微调阶段**:
   - apex_instruct (指令跟随)
   - cfa_exercise (CFA特定)
   - CFA_Extracted系列 (QA对)

3. **评估阶段**:
   - FinEval系列 (官方评估)
   - flare-cfa (交叉验证)

### 数据选择策略

- **通用能力**: 使用apex_instruct
- **CFA专业能力**: 使用cfa_exercise + CFA_Extracted系列
- **知识增强**: 使用CFA_Judgement + CFA_Level_III
- **评估验证**: 使用FinEval系列

## 五、模型信息

- **Salesforce/Llama-Fin-8b**: 官方金融LLM，基于FinDAP框架训练
- **tarun7r/Finance-Llama-8B**: 第三方金融LLM

两个模型都可用于CFA任务，但Llama-Fin-8b是专门为金融领域优化的。

